# Ensures that Lastpass is installed on this system
#
# Dependencies
source package-installer

if [ ! "$LASTPASS_USERNAME" ]; then
	echo '$LASTPASS_USERNAME not set'
fi

if [ "$LASTPASS_INSTALLED" ]; then
    echo "Found lastpass"
    return 0
fi

if package_installed lastpass-cli; then
    echo 'Latest lastpass-cli version installed'

    if lpass login $LASTPASS_USERNAME; then
        lpass sync
        export LASTPASS_INSTALLED="true"

        return 0
    fi
fi

echo 'Something went wrong and you might not have lastpass-cli :('
exit 1
